from IVPQIndex import IVPQIndex
import numpy as np
import time
import random
import faiss

n_values = [500, 1000, 5000, 10000, 50000, 100000, 10000000]
d = 1024

for n in n_values:
    d = 100
    labels = ["vector " + str(i) for i in range(0, n)]
    data = np.random.rand(n, d)
    print("-------Index Size:", str(n), "vectors-------")

    st = time.time()
    index =  IVPQIndex(data, labels)
    index.build()
    et = time.time()
    print("Time to Build:", str(et-st), "sec")

    st = time.time()
    at = random.randint(0, n)
    print(index.query(data[at:at+1]))
    et = time.time()
    print("Time to Query:", str(et-st), "sec")

    index.save("index.pkl")

    index2 = IVPQIndex.load("index.pkl")